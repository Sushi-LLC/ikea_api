<div class="container-fluid">
  <!-- –ë–ª–æ–∫ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç -->
  <% if @current_rates.present? %>
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header bg-info text-white">
            <div class="d-flex justify-content-between align-items-center">
              <h4 class="mb-0">üìä –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –Ω–∞ <%= Date.today.strftime('%d.%m.%Y') %></h4>
              <%= form_tag admin.path(:sync), method: :post, class: "d-inline" do %>
                <%= hidden_field_tag :date, Date.today %>
                <%= hidden_field_tag 'currencies[]', 'USD' %>
                <%= hidden_field_tag 'currencies[]', 'EUR' %>
                <%= hidden_field_tag 'currencies[]', 'PLN' %>
                <%= submit_tag "üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã", class: "btn btn-sm btn-light" %>
              <% end %>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <% ['USD', 'EUR', 'PLN'].each do |currency| %>
                <% if @current_rates[currency] %>
                  <% rate = @current_rates[currency] %>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100">
                      <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                          <% case currency %>
                          <% when 'USD' %>
                            üíµ –î–æ–ª–ª–∞—Ä –°–®–ê (USD)
                          <% when 'EUR' %>
                            üí∂ –ï–≤—Ä–æ (EUR)
                          <% when 'PLN' %>
                            üí∞ –ü–æ–ª—å—Å–∫–∏–π –∑–ª–æ—Ç—ã–π (PLN)
                          <% end %>
                        </h5>
                      </div>
                      <div class="card-body">
                        <table class="table table-sm table-bordered mb-0">
                          <tr>
                            <td><strong>–ö—É—Ä—Å –ù–ë –†–ë:</strong></td>
                            <td class="text-right">
                              <strong><%= number_with_precision(rate[:nbrb], precision: 4) %> BYN</strong>
                            </td>
                          </tr>
                          <tr>
                            <td>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫—É—Ä—Å:</td>
                            <td class="text-right">
                              <%= number_with_precision(rate[:official_rate], precision: 4) %> BYN
                              <small class="text-muted">(–∑–∞ <%= rate[:scale] %> –µ–¥.)</small>
                            </td>
                          </tr>
                          <tr>
                            <td><strong>–ö—É—Ä—Å —Å –º–∞—Ä–∂–æ–π 10%:</strong></td>
                            <td class="text-right">
                              <strong class="text-success"><%= number_with_precision(rate[:with_margin], precision: 4) %> BYN</strong>
                            </td>
                          </tr>
                          <tr>
                            <td>–î–∞—Ç–∞ –∫—É—Ä—Å–∞:</td>
                            <td class="text-right">
                              <%= rate[:date].strftime('%d.%m.%Y') %>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                <% end %>
              <% end %>
            </div>
            <div class="alert alert-info mt-3 mb-0">
              <small>
                <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –ö—É—Ä—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –∏–∑ API –ù–ë –†–ë. 
                –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã" –≤—ã—à–µ.
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  
  <!-- –¢–∞–±–ª–∏—Ü–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∫—É—Ä—Å–æ–≤ -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5>–ò—Å—Ç–æ—Ä–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç</h5>
        </div>
        <div class="card-body">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–í–∞–ª—é—Ç–∞</th>
                <th>–ö—É—Ä—Å</th>
                <th>–ú–∞—Å—à—Ç–∞–±</th>
                <th>–ö—É—Ä—Å –∑–∞ 1 –µ–¥.</th>
                <th>–°–æ–∑–¥–∞–Ω–æ</th>
              </tr>
            </thead>
            <tbody>
              <% admin.collection.each do |rate| %>
                <tr>
                  <td><%= rate.date.strftime('%d.%m.%Y') %></td>
                  <td><%= rate.currency_code %></td>
                  <td><%= number_with_precision(rate.rate, precision: 4) %></td>
                  <td><%= rate.scale %></td>
                  <td><%= number_with_precision(rate.rate_per_unit, precision: 4) %></td>
                  <td><%= rate.created_at.strftime('%d.%m.%Y %H:%M') %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
